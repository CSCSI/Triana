<!--

-->


<project name="attic-all" default="triana-app" basedir=".">

    <property name="version" value="0.1"/>
    <property name="core-classes" value="../triana-core/target/classes"/>
    <property name="gui-classes" value="../triana-gui/target/classes"/>
    <property name="types-classes" value="../triana-types/target/classes"/>
    <!--<property name="toolbox-classes" value="../triana-toolbox/target/classes"/>-->


    <target name="triana-app" depends="clean">
        <mkdir dir="target"/>
        <mkdir dir="target/classes"/>
        <copy todir="target/classes" overwrite="yes">
            <fileset dir="${core-classes}" includes="**/**"/>
        </copy>
        <copy todir="target/classes" overwrite="yes">
            <fileset dir="${gui-classes}" includes="**/**"/>
        </copy>
        <copy todir="target/classes" overwrite="yes">
            <fileset dir="${types-classes}" includes="**/**"/>
        </copy>
        <!--
        <copy todir="target/classes" overwrite="yes">
                    <fileset dir="${toolbox-classes}" includes="**/**"/>
                </copy>-->
        
        <jar jarfile="target/triana-app-${version}.jar" basedir="target/classes"/>
        <copy todir="target" overwrite="yes">
            <fileset dir="bin" includes="**/*.sh,**/*.bat,**/*.properties"/>
            <filterset begintoken="@" endtoken="@">
                <filter token="version" value="${version}"/>
            </filterset>
        </copy>
        <chmod dir="target" perm="775" includes="**/*.sh,**/*.bat"/>
    </target>

    <target name="clean">
        <delete dir="target"/>
    </target>


    <target name="mvn-install">
        <exec executable="mvn">
            <arg value="-e"/>
            <arg value="install:install-file"/>
            <arg value="-Dfile=target/triana-app-${version}.jar"/>
            <arg value="-DpomFile=pom.xml"/>
            <arg value="-Dversion=${version}"/>
            <arg value="-Dpackaging=jar"/>
        </exec>
    </target>

    <target name="mvn-deploy">
        <exec executable="mvn">
            <arg value="-e"/>
            <arg value="deploy:deploy-file"/>
            <arg value="-Dfile=target/triana-app-${version}.jar"/>
            <arg value="-DpomFile=pom.xml"/>
            <arg value="-Dversion=${version}"/>
            <arg value="-Durl=scp://lapis.cs.cf.ac.uk/nfs/mntI3/static/triana/html/maven"/>
            <arg value="-DrepositoryId=trianacode-maven-repos"/>
            <arg value="-Dpackaging=jar"/>
        </exec>
    </target>

</project>
